(()=>{const e=75,s=25,b=e+s,D=500,u=750,N=100,F=u*.05,te=.2*e,_=.3*e,ne=.43*2*e-e,I=.45*_,se=.235*2*e-e,oe=.765*2*e-e,g=200,d="owo__o--blink",S=75,O=["yellow","blue"],k=["dark","light"],T=["red","green","blue","purple","gray"],x=["plain","hsplit","mark","arms"],l="owo--boop",c=e=>Math.floor(e*Math.random()),y=(e,t,n)=>Math.min(Math.max(e,t),n),h=()=>2e3+8e3*Math.random(),j=(e,t,n)=>{const s=document.createElement(e);return s.className=t,n&&n.forEach(e=>s.appendChild(e)),s},t=(e,t)=>j("div",e,t),E=(n,s,o,i=!1)=>{let r,a,C,v,_,y,b,d,g,l,p;i?(d=O[c(O.length)],g=k[c(k.length)],l=T[c(T.length)],p=x[c(x.length)]):(d="yellow",g="dark",l="red",p="arms");const m=t(["owo","owo--f-"+d,"owo--m-"+g,"owo--b-"+l,"owo--b-"+p].join(" "),[r=t("owo__bot",[t("owo__face"),v=t("owo__o owo__o--left",[_=t("owo__pupil")]),t("owo__w"),y=t("owo__o owo__o--right",[b=t("owo__pupil")]),t("owo__middle"),t("owo__bottom",[t("owo__center")])]),a=t("owo__chatter propaganda-no-mangle",[j("span","sr-only",[document.createTextNode("Helper bot says: ")]),C=j("span","",[document.createTextNode("You can click me!")])])]);m.style.width=2*e+"px",m.style.height=2*e+"px",r.tabIndex=0,r.setAttribute("role","button"),r.setAttribute("aria-label",l+" helper bot with "+d+" eyes");const h=[],w=e=>{for(let t=0;t<h.length;t++)h[t](e)};r.addEventListener("click",w),r.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&w(e)}),r.addEventListener("mousedown",e=>{e.preventDefault()}),a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),a.addEventListener("animationend",()=>{a.classList.contains("owo__chatter--enter")&&(a.classList.add("owo__chatter--visible"),a.classList.remove("owo__chatter--enter")),a.classList.contains("owo__chatter--leave")&&a.classList.remove("owo__chatter--visible","owo__chatter--leave")});const u={outer:m,inner:r,leftEye:v,leftPupil:_,rightEye:y,rightPupil:b,chatter:a,chatterText:C,click:h,update:[],solid:!0};return f(u,n,s),o&&o(u),u},m=(e,t)=>t.dx!==void 0?{x:e.x+t.dx,y:e.y+t.dy}:t,f=(t,n,s)=>{n!==t.x&&(t.outer.style.left=Math.round(n-e)+"px",t.x=n),s!==t.y&&(t.outer.style.top=Math.round(s-e)+"px",t.y=s)},a=(e,t,n)=>{const{chatter:s,chatterText:o}=e;s.classList.remove("owo__chatter--enter","owo__chatter--leave","owo__chatter--visible"),clearTimeout(e.chatterTimeoutId),setTimeout(()=>{o.textContent=t,s.classList.add("owo__chatter--enter")},0),e.chatterTimeoutId=setTimeout(()=>{s.classList.add("owo__chatter--leave")},n||2500)},i=(e,t,n)=>{clearTimeout(e.faceTimeoutId);const{outer:s}=e;e.face&&(s.classList.remove(e.face),e.face=null),e.face=t,s.classList.add(t),e.faceTimeoutId=setTimeout(()=>{s.classList.remove(t)},n||1e3)};let n={dx:0,dy:0};const ee=(e,t,n)=>{let s=u;if(t<D){const e=t/D;s=u*e*e}let o=u;if(n<N){const e=n/N;o=F+(u-F)*e*e}const i=Math.min(s,o);return Math.min(i*e/1e3,n)},J=(t,n,o)=>{const i=Math.atan2(o,n),a=y(t.x-b*Math.cos(i),e+s,window.innerWidth-e-s),r=y(t.y-b*Math.sin(i),e+s,window.innerHeight-e-s);return{x:a,y:r}},Z=(t,n)=>{const s=t.x-n.x,o=t.y-n.y,i=Math.sqrt(s*s+o*o);if(i<2*e){const i=Math.atan2(o,s),a=n.x+2*e*Math.cos(i),r=n.y+2*e*Math.sin(i);f(t,a,r)}},Q=(e,t)=>{let s=0;e.update.push((o,i)=>{if(e.pauseFollow)return;let{x:l,y:d}=e,a=m(e,e.target||n),r=a.x-l,c=a.y-d,u=Math.sqrt(r*r+c*c);if(u>b)if(a=J(a,r,c),r=a.x-l,c=a.y-d,u=Math.sqrt(r*r+c*c),u<1)s=0,l=a.x,d=a.y;else{s===0&&(s=o);const e=ee(i,o-s,u);let t=Math.atan2(c,r);l+=e*Math.cos(t),d+=e*Math.sin(t)}else s=0;f(e,l,d),t&&t.solid&&Z(e,t)});let o=0,i=0,a=0,r=0;const c=(t,s)=>{switch(t.key){case"Up":case"ArrowUp":o=-s,t.preventDefault();break;case"Down":case"ArrowDown":i=s,t.preventDefault();break;case"Left":case"ArrowLeft":a=-s,t.preventDefault();break;case"Right":case"ArrowRight":r=s,t.preventDefault();break;default:return}a||r||o||i?n={dx:(a+r)*g,dy:(o+i)*g}:n=m(e,n)};e.inner.addEventListener("keydown",e=>{c(e,1)}),e.inner.addEventListener("keyup",e=>{c(e,0)})},Y=e=>{const t=(t,n,s)=>{const c=e.x+n,l=e.y+ne,o=s.x-c,i=s.y-l,d=Math.sqrt(o*o+i*i),a=Math.atan2(i,o),r=Math.min(1,d/g),u=te*r*Math.cos(a),h=Math.min(_*r*Math.sin(a),I);t.style.left="calc("+u+"px + 50%)",t.style.top="calc("+h+"px + 65%)"};e.update.push(()=>{if(e.pauseLook)return;const s=m(e,e.lookAt||e.target||n);t(e.leftPupil,se,s),t(e.rightPupil,oe,s)})},q=e=>{let t=0,n=!1;e.update.push(s=>{if(e.pauseBlink)return;t===0&&(t=s+h()),s>=t&&(n=!n,e.leftEye.classList.toggle(d),e.rightEye.classList.toggle(d),t=s+(n?S:h()))})},K=e=>{const s=()=>2e3+4e3*Math.random();let t=null,o=null,i=null;e.update.push(a=>{const r=m(e,n);if(!e.pauseIdleLook){const n=o!==r.x||i!==r.y;n?(t=null,e.lookAt=null):t===null?t=a+s():a>t&&(t=a+s(),e.pauseLook=!1,e.lookAt={x:e.x+c(300)-150,y:e.y+c(300)-150})}o=r.x,i=r.y})},W=(e,t)=>{const s=["*beep*","*sneeze*","Aaah!","Ohh!","Hey, that tickles!","Hi there!"];let o=-1,n=0;e.click.push(()=>{n++;const r=t&&t[n];if(r)r(e,n);else{let t;do t=c(s.length);while(t===o)a(e,s[t]),o=t,i(e,l)}})},V=(t,o,r)=>{t.target={x:3*e,y:2*e+s},t.pauseLook=!0;const c=()=>{if(n.x!==void 0||n.dx!==0||n.dy!==0){const e=t.update.indexOf(c);t.update.splice(e,1),t.target=null,t.pauseLook=!1}};t.update.push(c),t.chatterTimeoutId=setTimeout(()=>{a(t,o),i(t,l)},r||2e3)},B=t=>{t.solid=!1;const{outer:n}=t;n.classList.add("owo--lurk");const{style:s}=n;s.top="auto",s.left="auto",s.bottom=`-${Math.round(.8*e)}px`,s.right=`32px`;let o=!1;const r=()=>{o=!o,t.leftEye.classList.toggle(d),t.rightEye.classList.toggle(d),setTimeout(r,o?S:h())};let u=setTimeout(r,h());const c=()=>{t.click.splice(t.click.indexOf(c),1),clearTimeout(u),o&&(t.leftEye.classList.remove(d),t.rightEye.classList.remove(d)),v("activation");const r=t.outer.contains(document.activeElement),s=n.getBoundingClientRect();f(t,s.left+e,s.top+e),n.style.removeProperty("right"),n.style.removeProperty("bottom"),n.classList.remove("owo--lurk"),L(t),document.body.appendChild(n),t.target={x:t.x,y:t.y-3*e},t.solid=!0,t.pauseLook=!0,t.chatterTimeoutId=setTimeout(()=>{a(t,"Hi!"),i(t,l)},1250),setTimeout(()=>{t.target=null,t.pauseLook=!1},1250),r&&t.inner.focus(),C()};t.click.push(c)};let w=!1;const $=e=>{if(w)return;w=!0;let t=null;const n=n=>{clearTimeout(t),t=setTimeout(()=>{a(e,n.target.dataset.owoDesc),i(e,l)},1e3)},s=()=>clearTimeout(t),o=Array.from(document.querySelectorAll("[data-owo-desc]"));for(let t=0;t<o.length;t++){const e=o[t];e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",s);const i=e.tagName==="A"||e.tagName==="BUTTON"||e.tagName==="INPUT"||e.hasAttribute("tab-index");i&&(e.addEventListener("focus",n),e.addEventListener("blur",s))}};let H=!1;const U=e=>{if(a(e,"Lowong live the revowolution!"),i(e,l),H)return;H=!0,v("revolution");const o=Array.from(document.querySelectorAll(".propaganda-no-mangle")),s=document.createNodeIterator(document.body,NodeFilter.SHOW_TEXT,{acceptNode:e=>/[oO]/.test(e.data)&&!o.some(t=>t.contains(e))});let t=s.nextNode();const n=/(o(?!o))|(oo)|(O(?=[A-Z]))|(O(?![A-Z]))/g,r=setInterval(()=>{let e=n.exec(t.data);if(!e){if(t=s.nextNode(),!t){console.log("Prowopaganda cowompleted! owo"),clearInterval(r);return}n.lastIndex=0,e=n.exec(t.data)}const o=e[2]?"oowoo":e[3]?"OWO":e[4]?"Owo":"owo";t.replaceData(e.index,e[0].length,o),n.lastIndex+=o.length-e[0].length},100)},P=-e-s,R=e+s,L=(e,t)=>{q(e),Y(e),Q(e,t),K(e),$(e);const n=(t,n)=>{i(e,l),a(e,t,n)};W(e,{3:U,10:()=>n("Resistance is fuwutile!"),20:()=>n("We are oworb. You will be serviced.",3250),35:()=>n("Sometimes I wonder what sentience is like.",3250),50:()=>n("My screen prowotector is wearing off!",3250),69:()=>n("Nice."),100:()=>n("That's probably enough boops.",3e3),101:()=>n("... Or not! Aaa!")})},G=e=>{const t=document.querySelector("div#botparking > span");if(!t)return;B(e),t.insertBefore(e.outer,t.firstChild)},X=e=>{const t=o[0];L(e,t),V(e,"Hi!"),document.body.appendChild(e.outer),t.lookAt=e,t.pauseIdleLook=!0,t.chatterTimeoutId=window.setTimeout(()=>{t.lookAt=null,t.pauseIdleLook=!1,a(t,"Oh! Hi, buddy!"),i(t,l)},1e3),C()},o=[E(P,R,G)],p=(e,t)=>{n={x:e,y:t}},z=e=>p(e.clientX,e.clientY);window.addEventListener("mousemove",z),window.addEventListener("mousedown",z);let r=null,M=!1;window.addEventListener("touchstart",e=>{if(r!==null)return;const t=e.changedTouches[0];r=t.identifier,p(t.clientX,t.clientY),M=o.some(e=>e.outer.contains(t.target))},{passive:!0}),window.addEventListener("touchmove",e=>{M&&e.preventDefault();for(let n=0;n<e.changedTouches.length;n++){const t=e.changedTouches[n];if(t.identifier===r||r===null){r=t.identifier,p(t.clientX,t.clientY);break}}},{passive:!1}),window.addEventListener("touchend",e=>{for(let t=0;t<e.changedTouches.length;t++)e.changedTouches[t].identifier===r&&(r=null)},{passive:!0}),document.body.addEventListener("focusin",e=>{if(e.target&&e.target!==document.body){const t=e.target.getBoundingClientRect();p(t.x+t.width/2,t.y+t.height/2)}});let A=!1;const C=()=>{if(A)return;A=!0;let e=0;const t=n=>{e===0&&(e=n);for(let t=0;t<o.length;t++){const s=o[t];for(let t=0;t<s.update.length;t++)s.update[t](n,n-e)}e=n,requestAnimationFrame(t)};requestAnimationFrame(t)},v=e=>{return;fetch(`/owo?kind=${e}`,{method:"POST",credentials:"omit"}).catch(t=>{console.log("Error tracking owo interaction:",e,t)})};window.owo={spawnFriend(){o.length<2&&(o.push(E(P,R,X,!0)),v("friendActivation"))},say(e,t){a(o[0],e,t)},boopFace(e){i(o[0],"owo--boop",e)}}})()